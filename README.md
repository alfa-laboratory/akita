Akita - бери и тестируй
==========================================

Фреймворк для bdd тестирования на основе cucumber.
Шаблон для клонирования с инструкцией как начать можно найти тут:
http://git/projects/ALAT/repos/testiodor-testing-template

Сюда можно добавлять ваши универсальные степы, которые могут быть полезны остальным. При этом обязательно нужно:
 * проверить, что в них нет отсылок к каким-то специфическим для вашего проекта страницам/степам/etc
 * в степах не должно быть css selector'ов
 * ...

Каждый тест должен заканчивается что-то проверяющим степом. Тест, который ничего не проверяет, смело можно удалять.
Проверяющие степы в Javadoc'e начинаются со слова "Проверка".

**Описание степов:**
## `public class DefaultSteps`

В alfaScenario используется хранилище переменных. Для сохранения/изъятия переменных используются методы setVar/getVar. Каждая страница, с которой предполагается взаимодействие, должна быть описана в соответствующем классе, наследующем AlfaPage. Для каждого элемента следует задать имя на русском, через аннотацию @Name, чтобы искать можно было именно по русскому описанию, а не по селектору. Селекторы следует хранить только в классе страницы, не в степах, в степах - взаимодействие по русскому названию элемента.

##### `@И("^сохранено значение из глобальной перменной \"([^\"]*)\" в переменную \"([^\"]*)\"$") public void saveValueToVariable(String globalVarName, String varName)`

Читаем значение переменной из application.properties и сохраняем в переменную в alfaScenario, для дальнейшего переиспользования

##### `@Когда("^я перешел по ссылке \"([^\"]*)\"$") public void goTo(String address)`

Переходим по ссылке, разрезолвливая переменные из хранилища alfaScenario

##### `@Тогда("^текущий URL равен \"([^\"]*)\"$") public void checkCurrentURL(String url)`

Проверка, что текущий URL совпадает с ожидаемым

##### `@И("^нажал на (?:кнопку|поле|блок) \"([^\"]*)\"$") public void clickOnThisButton(String buttonName)`

На странице ищется элемент и по нему кликается

##### `@И("^элемент \"([^\"]*)\" отображается на странице$") public void elemIsPresentedOnPage(String elemName)`

Проверка, что в течении 10 секунд ожидается появления элемента(не списка) на странице

##### `@И("^элемент \"([^\"]*)\" отобразился на странице в течение (\\d+) секунд$") public void elemIsPresentedOnPage(String elemName, int seconds)`

Проверка. В течение заданного количества секунд ожидается появление элемента(не списка) на странице

##### `@И("^список \"([^\"]*)\" отображается на странице$") public void listIsPresentedOnPage(String elemName)`

Проверка, что в течении 10 секунд ожидается появления списка на странице

##### `@И("^список \"([^\"]*)\" отобразился на странице в течение (\\d+) секунд$") public void listIsPresentedOnPage(String elemName, int seconds)`

Проверка. В течение заданного количества секунд ожидается появление списка на странице

##### `@И("^элемент \"([^\"]*)\" не найден на странице$") public void elemIsNotPresentedOnPage(String elemName)`

Проверка, что элемента нет на странице. (перед этим ждем 3 секунды, зачем - не знаю)

##### `@И("^ждем пока элемент \"([^\"]*)\" исчезнет") public void waitUntilDisapper(String elemName)`

Проверка. В течении 10 секунд ожидаем пока элемент исчезнет (станет невидимым)

##### `@Когда("^(?:страница|блок|форма) \"([^\"]*)\" (?:загрузилась|загрузился)$") public void loadPage(String nameOfPage)`

Проверяем, что все элементы, которые описаны в классе страницы с аннотацией @Name, но без аннотации @Optional, видны на странице. При необходимости ждем.

##### `@Когда("^установить \"([^\"]*)\" на весь тестовый suit: \"([^\"]*)\"$") public void setUserCus(String varName, String value)`

Задать значение переменной в хранилище переменных. Один из кейсов: установка userCus для степов, использующих его.

##### `@И("^установить \"([^\"]*)\" равным \"([^\"]*)\"$") public void setVar(String varName, String value)`

Задать значение переменной в хранилище переменных. Один из кейсов: установка userCus для степов, использующих его. Полная копия предыдущего.

##### `@Когда("^числовые значения в переменных \"([^\"]*)\" и \"([^\"]*)\" совпадают") public void compareTwoDigitVars(String firstValue, String secondValue)`

Проверка. Из хранилища достаются значения двух перменных, и сравниваются на равенство. (для числел)

##### `@Когда("^текстовые значения в переменных \"([^\"]*)\" и \"([^\"]*)\" совпадают$") public void compageTwoVars(String varName1, String varName2)`

Проверка. Из хранилища достаются значения двух перменных, и сравниваются на равенство. (для строк)

##### `@И("^значение поля \"([^\"]*)\" сохранено в переменную \"([^\"]*)\"$") public void saveFieldValueToVariable(String fieldName, String variableName)`

Значение из поля сохраняется в заданную переменную.

##### `@И("^значение input-поля \"([^\"]*)\" сохранено в переменную \"([^\"]*)\"$") public void saveInputValueToVariable(String fieldName, String variableName)`

Значение из input-поля сохраняется в заданную переменную (сохраняется значение из атрибута value).

##### `@Тогда("^значение в поле \"([^\"]*)\" совпадает со значением переменной \"([^\"]*)\"$") public void compareFieldAndVariableValues(String fieldName, String variableName)`

Проверка. Текстовое значение из поля совпадает со значением заданной переменной из хранилища.

##### `@Тогда("^значение в поле \"([^\"]*)\" есть в списке из переменной\"([^\"]*)\"$") public void checkListContainsValueFromField(String fieldName, String variableListName)`

Проверка. Из хранилища достаём список по заданному ключу. Проверяем, что текстовое значение из поля содержится в списке.

##### `@И("^совершен переход на страницу \"([^\"]*)\" по прямой ссылке = \"([^\"]*)\"$") public void goToSelectedPageByLink(String pageName, String urlName)`

Проверка. Совершается переход по заданной ссылке и ждется, пока заданная страница полностью загрузится (встренная проверка, что загружается та страница, которая ожидается)

##### `@Когда("^выполнено ожидание в течение (\\d+) секунд$") public void waitDuring(int seconds)`

Ожидание заданное количество секунд

##### `@Тогда("^блок \"([^\"]*)\" исчез$") public void blockIsDisappears(String nameOfPage)`

проверка, что блок исчез/стал невидимым

##### `@И("^нажать на клавиатуре \"([^\"]*)\"$") public void pressButtonOnKeyboard(String buttonName)`

Эмулирует нажатие на клавиатуре клавиш. Для кейса, когда нужно промотать страицу вниз по Page Down

##### `@Когда("^установлено значение \"([^\"]*)\" в поле \"([^\"]*)\"$") public void setValueToField(String amount, String nameOfField)`

Ищется указанное текстовое поле и устанавливается в него заданное значение. Перед использованием поле нужно очистить

##### `@Когда("^очищено поле \"([^\"]*)\"$") public void cleanField(String nameOfField)`

Ищется поле и очишается

##### `@Тогда("^поле \"([^\"]*)\" пусто$") public void fieldInputIsEmpty(String nameOfField)`

Проверка, что поле для ввода пустое

##### `@Тогда("^ожидается появление уведомления с текстом \"([^\"]*)\"$") public void notificationAppearsWithText(String text) throws Throwable`

Проверка, что появляется уведомление с заданным текстом. Редкий случай, когда css селектор используется в степах

##### `@И("^верно выражение \"([^\"]*)\"$") public void evaluate(String expression)`

Проверка, что переданное выражение верно. Должно содержать '='. Переменные разрезолвливаются из хранилища

##### `@И("^установить разрешение \"([^\"]*)\" на \"([^\"]*)\"$") public void setupWindowSize(String widthRaw, String heightRaw)`

Устанавливает размеры окна с браузером

##### `@Если("^развернуть окно на весь экран$") public void развернутьОкноНаВесьЭкран()`

Разворачивает окно с браузером на весь экран

##### `@Тогда("^в списке \"([^\"]*)\" содержатся элементы$") public void checkTypesOfPay(String nameOfList, List<String> listOfType)`

Проверка, что в списке со страницы есть перечисленные в таблице элементы

##### `@Тогда("^в списке \"([^\"]*)\" выбран элемент со значением \"([^\"]*)\"$") public void checkTypesOfPay(String nameOfList, String nameOfValue)`

В списке со страницу кликаем по элементу, содержащим заданное значение



## `public class DefaultApiSteps`

##### `@И("^вызван \"([^\"]*)\" c URL \"([^\"]*)\", headers и parameters из таблицы. Полученный ответ сохранен в переменную \"([^\"]*)\"$") public void sendRequest(String typeOfRequest, String urlName, String variableName, List<RequestParam> table) throws Exception`

Посылается http GET/POST/... запрос по заданному урлу с заданными параметрами. Результат сохраняется в заданную переменную

##### `@И("^вызван \"([^\"]*)\" c URL \"([^\"]*)\", headers и parameters из таблицы. Ожидается код ответа: (\\d+)$") public void checkStatusCodeWithAssertion(String typeOfRequest, String urlName, int expectedStatusCode, List<RequestParam> table) throws Exception`

Проверка. Посылается http GET/POST/... запрос по заданному урлу с заданными параметрами. Проверяется, что код ответа соответствует ожиданиям.

##### `@Тогда("^поле \"([^\"]*)\" ответа \"([^\"]*)\" совпадает с$") public void checkExpectedFieldApi(String field, String apiResponse, String expectedFieldValue) throws Throwable`

Проверка. Из большого JSON'a вытаскивается часть по названию и проверяется, что она совпадает с переданнам значением.



## `public class SystemSteps`

##### `public static boolean isFilePdf(String filePath) throws FileNotFoundException`

Проверка, что переданный файл имеет тип PDF

##### `public static <E extends Enum<E>> E enumElementLookup(Class<E> e, String id)`

В переданном Enum'e ищется элемент, переданный строкой
